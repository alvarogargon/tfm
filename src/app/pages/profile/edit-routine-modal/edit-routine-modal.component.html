<div class="modal-overlay">
  <div class="modal-content">
    <h2>Editar Rutina</h2>
    <form (ngSubmit)="onSubmit()" class="modal-form">
      <div class="form-group">
        <label for="name">Nombre</label>
        <input
          type="text"
          id="name"
          [(ngModel)]="routineData().name"
          name="name"
          required
          aria-label="Nombre de la rutina"
        />
      </div>
      <div class="form-group">
        <label for="description">Descripción</label>
        <textarea
          id="description"
          [(ngModel)]="routineData().description"
          name="description"
          aria-label="Descripción de la rutina"
        ></textarea>
      </div>
      <div class="form-group">
        <label for="is_template">Plantilla</label>
        <input
          type="checkbox"
          id="is_template"
          [(ngModel)]="routineData().is_template"
          name="is_template"
          aria-label="¿Es una plantilla?"
        />
      </div>
      <div class="form-group">
        <label for="start_time">Hora de inicio</label>
        <input
          type="datetime-local"
          id="start_time"
          [(ngModel)]="routineData().start_time"
          name="start_time"
          aria-label="Hora de inicio"
        />
      </div>
      <div class="form-group">
        <label for="end_time">Hora de fin</label>
        <input
          type="datetime-local"
          id="end_time"
          [(ngModel)]="routineData().end_time"
          name="end_time"
          aria-label="Hora de fin"
        />
      </div>
      <div class="form-group">
        <label for="daily_routine">Frecuencia</label>
        <select
          id="daily_routine"
          [(ngModel)]="routineData().daily_routine"
          name="daily_routine"
          required
          aria-label="Frecuencia de la rutina"
        >
          <option value="Daily">Diaria</option>
          <option value="Weekly">Semanal</option>
          <option value="Monthly">Mensual</option>
        </select>
      </div>
      @if (guideUserRelations.length > 0) {
        <div class="form-group">
          <label for="targetUserId">Usuario</label>
          <select
            id="targetUserId"
            [(ngModel)]="selectedUserId"
            name="targetUserId"
            required
            aria-label="Seleccionar usuario"
          >
            @for (relation of guideUserRelations; track relation.guide_user_id) {
              <option [ngValue]="relation.user_id">
                {{ relation.guide_user_id === 0 ? 'Mi Perfil' : relation.user?.username }} (ID: {{ relation.user_id }})
              </option>
            }
          </select>
        </div>
      }
      <div class="button-group">
        <button type="submit" class="button" aria-label="Guardar cambios">Guardar</button>
        <button type="button" class="button" (click)="onCancel()" aria-label="Cancelar">Cancelar</button>
      </div>
    </form>
  </div>
</div>